<script>
  const urlParams = new URLSearchParams(window.location.search);
  const idPet = urlParams.get('id');
  const container = document.getElementById('conteudo-pet');

  async function carregarPet() {
    if (!idPet) {
      container.innerHTML = '<p class="erro">‚ùå ID do pet n√£o informado.</p>';
      return;
    }

    try {
      const resp = await fetch(`https://webhook.fiqon.app/webhook/a02b8e45-cd21-44e0-a619-be0e64fd9a4b/b9ae07d8-e7af-4b1f-9b1c-a22cc15fb9cd?id_pet=${encodeURIComponent(idPet)}`);
      if (!resp.ok) throw new Error('Erro HTTP: ' + resp.status);

      const pet = await resp.json();

      if (!pet || !pet.nome_pet) {
        container.innerHTML = '<p class="erro">‚ö†Ô∏è Pet n√£o encontrado no sistema.</p>';
        return;
      }

      container.innerHTML = `
        <img src="${pet.foto_pet || 'https://cdn-icons-png.flaticon.com/512/616/616408.png'}" class="foto-pet" alt="Foto do pet">
        <h2>${pet.nome_pet}</h2>
        <div class="info">
          <p><strong>Esp√©cie:</strong> ${pet.especie || '-'}</p>
          <p><strong>Ra√ßa:</strong> ${pet.raca || '-'}</p>
          <p><strong>Sexo:</strong> ${pet.sexo || '-'}</p>
          <p><strong>Cidade:</strong> ${pet.cidade || '-'}</p>
          <p><strong>Tutor:</strong> ${pet.nome_tutor || '-'}</p>
          <p><strong>Contato:</strong> ${pet.whatsapp_tutor ? '+55 ' + pet.whatsapp_tutor : '-'}</p>
        </div>
        ${
          pet.whatsapp_tutor
            ? `<a class="botao-contato" href="https://wa.me/55${pet.whatsapp_tutor}?text=Ol√°! Encontrei o pet ${encodeURIComponent(pet.nome_pet)} atrav√©s do AcheiMeuPet üêæ" target="_blank">
                 üì± Entrar em contato com o tutor
               </a>`
            : ''
        }
      `;
    } catch (erro) {
      console.error('Erro ao carregar ficha:', erro);
      container.innerHTML = '<p class="erro">‚ùå Erro ao carregar dados do pet.</p>';
    }
  }

  carregarPet();
</script>
